!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.domainr=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return s(i?i:t)},h,h.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";var n=t("./client"),s=t("./search-box");t("./jquery"),e.exports={Client:n,SearchBox:s}},{"./client":3,"./jquery":4,"./search-box":5}],2:[function(t,e,i){"use strict";function n(t,e){return c?void r(t,e):void o(t,e)}function s(){try{var t=window.XMLHttpRequest||window.ActiveXObject;return new t("MSXML2.XMLHTTP.3.0")}catch(e){return{}}}function r(t,e){var i=s();i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return void a.error("Error fetching data: "+i.responseText);var t;try{t=JSON.parse(i.responseText)}catch(n){return void a.error("Unable to parse data: "+i.responseText+"; "+n)}e(t)}},i.open("GET",t,!0),i.send()}function o(t,e){var i=document.createElement("script");i.async=!0;var n="_jsonp"+u++,s=setTimeout(function(){a.error("Timeout trying to retrieve "+t)},5e3);window[n]=function(t){clearTimeout(s),setTimeout(function(){var t=document.getElementById(n);t.parentNode.removeChild(t),window[n]=void 0;try{delete window[n]}catch(e){}},0),e(t)};var r=t.indexOf("?")>=0?"&":"?";i.setAttribute("src",t+r+"callback="+n),i.id=n;var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement;o.insertBefore(i,o.firstChild)}var a=t("./util"),u=0,c=!1;"withCredentials"in s()&&(c=!0),e.exports={getJSON:n}},{"./util":6}],3:[function(t,e,i){"use strict";function n(t){if(t=t||{},this.clientId=t.clientId,this.mashapeKey=t.mashapeKey,!this.clientId&&!this.mashapeKey)throw new Error("Missing mashapeKey or clientId");this.baseURL=t.baseURL||(this.clientId?"https://api.domainr.com/v2":"https://domainr.p.mashape.com/v2")}var s=t("./ajax"),r=t("./util");n.prototype={search:function(t,e){this._get("/search",this.searchParams(t),e)},searchParams:function(t){return r.extract(t,["query","registrar","location","defaults"])},status:function(t,e){r.uniq(t);var i={domain:t.join(",")};this._get("/status",i,e)},options:function(t,e){this._get("/options",{domain:t},e)},whois:function(t,e){this._get("/whois",{domain:t},e)},zones:function(t){this._get("/zones",{},t)},registerURL:function(t){return this._url("/register",{domain:t})},_get:function(t,e,i){var n=this.baseURL+t+"?"+r.qs(e||{},this._key());s.getJSON(n,i)},_url:function(t,e){return this.baseURL+t+"?"+r.qs(e||{},this._key())},_key:function(){return this.clientId?{client_id:this.clientId}:{"mashape-key":this.mashapeKey}}},e.exports=n},{"./ajax":2,"./util":6}],4:[function(t,e,i){"use strict";var n=(t("./search-box"),t("./util"));if(window.jQuery){var s=window.jQuery;s.fn.domainrSearchBox=function(t){return this.each(function(e,i){var r=n.extract(t,["clientId","mashapeKey","renderWith","limit","registrar","defaults","onSelect"]);if(r.observe=i,t.renderTo){var o=s(t.renderTo);o.length>0&&(r.renderTo=o[0])}new domainr.SearchBox(r)}),this}}},{"./search-box":5,"./util":6}],5:[function(t,e,i){"use strict";function n(t){var e=t.results,i=e.length;if(0===i)return"";for(var n=['<div class="domainr-results">'],s=0;i>s;s++){var r=e[s];n.push('<div class="domainr-result '+r.status+'" data-domain="'+r.domain+'"><span class="domainr-result-domain"><span class="domainr-result-host">'+r.host+'</span><span class="domainr-result-subdomain">'+r.subdomain+'</span><span class="domainr-result-zone">'+r.zone+'</span></span><span class="domainr-result-path">'+r.path+"</span></div>")}return n.push("</div>"),n.join("")}function s(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function r(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detatchEvent?t.detachEvent("on"+e,i):(t["on"+e]=null,delete t["on"+e])}function o(t,e){t.classList?t.classList.add(e):t.className+=" "+e}var a=t("./client"),u=t("./util"),c=function(t){t=t||{},this._client=new a(u.extract(t,["clientId","mashapeKey"])),this._state={query:"",results:[],limit:-1},this._seq=0,this._last=0,this._cache={},this._listeners={},this._renderer=n;var e=this;this._input=function(){e._state.query!=e._in.value&&(e._state.query=e._in.value,e._search())},this._click=function(t){t=t||window.event,e._choose(t)},void 0!==t.observe&&this.observe(t.observe),void 0!==t.renderTo&&this.renderTo(t.renderTo),void 0!==t.renderWith&&this.renderWith(t.renderWith),void 0!==t.limit&&this.limit(t.limit),void 0!==t.registrar&&this.registrar(t.registrar),void 0!==t.defaults&&this.defaults(t.defaults),void 0!==t.onSelect&&this.on("select",t.onSelect)};c.prototype={limit:function(t){return this._state.limit=t,this._update(),this},registrar:function(t){return this._state.registrar=t,this},defaults:function(t){return this._state.defaults=t.join(","),this},observe:function(t){return this._in&&(r(this._in,"keyup",this._input),r(this._in,"input",this._input),r(this._in,"change",this._input)),this._in=t,s(t,"keyup",this._input),s(t,"input",this._input),s(t,"change",this._input),this},on:function(t,e){var i=this._listeners[t]||[];return this._listeners[t]=i,i.push(e),this},_emit:function(t,e){var i=this._listeners[t];if(i)for(var n=0;n<i.length;n++)try{i[n](e)}catch(s){u.error(s)}},renderTo:function(t){return this._out&&r(this._out,"click",this._click),this._out=t,o(t,"domainr-results-container"),s(t,"click",this._click),this},renderWith:function(t){return this._renderer=t,this},_render:function(){return this._out?(this._out.innerHTML=this._renderer(this._state),this):void 0},_search:function(){var t=u.qs(this._client.searchParams(this._state)),e=this._cache[t];if(void 0!==e)return this._state.results=e.results,void this._update();var i=this,n=this._seq++;this._client.search(this._state,function(e){i._cache[t]=e,i._last>n||(i._last=n,i._state.results=e.results,i._update())})},_update:function(){this._limit(),this._status(),this._render()},_limit:function(){this._state.limit>=0&&this._state.results.length>this._state.limit&&(this._state.results.length=this._state.limit)},_status:function(){for(var t=[],e=this._state.results,i=0;i<e.length;i++){var n=e[i];n.status=this._cache[n.domain+":status"]||n.status,n.status||(n.status="unknown",t.push(n.domain))}if(0!==t.length){var s=this;this._client.status(t,function(t){for(var e=t.status,i=0;i<e.length;i++){var n=e[i];s._cache[n.domain+":status"]=n.status}s._update()})}},_choose:function(t){for(var e=this._state.results,i=t.target||t.srcElement;i&&i!=document;i=i.parentNode){var n=i.getAttribute("data-domain");if(n)for(var s=0;s<e.length;s++){var r=e[s];if(r.domain==n)return void this._emit("select",r)}}}},e.exports=c},{"./client":3,"./util":6}],6:[function(t,e,i){"use strict";function n(t,e){for(var i={},n=0;n<e.length;n++){var s=e[n];void 0!==t[s]&&(i[s]=t[s])}return i}function s(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)t.push(a(n)+"="+a(i[n]))}return t.join("&")}function r(t){window.console&&window.console.error&&window.console.error("[domainr] "+t)}function o(t){var e,i;for(e=0;e<t.length;e++)for(i=e+1;i<t.length;i++)t[e]===t[i]&&(t.splice(i,1),i--)}var a=encodeURIComponent;e.exports={euc:a,extract:n,qs:s,error:r,uniq:o}},{}]},{},[1])(1)});